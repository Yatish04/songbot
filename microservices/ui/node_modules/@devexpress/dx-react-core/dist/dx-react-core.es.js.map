{"version":3,"file":"dx-react-core.es.js","sources":["../src/plugged/plugin-indexer.jsx","../src/plugged/template.jsx","../src/plugged/template-placeholder.jsx","../src/plugged/plugin-host.jsx","../src/plugged/plugin-container.jsx","../src/plugged/action.jsx","../src/utils/plugin-helpers.js","../src/plugged/getter.jsx","../src/plugged/template-connector.jsx","../src/draggable/touch-strategy.js","../src/draggable/gesture-cover.js","../src/draggable/mouse-strategy.js","../src/draggable/shared-events.js","../src/draggable/selection-utils.js","../src/draggable.jsx","../src/drag-drop/provider.jsx","../src/drag-drop/source.jsx","../src/drag-drop/target.jsx","../src/utils/render-component.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const INDEXABLE_COMPONENT = Symbol('indexableComponent');\n\nexport const PluginIndexer = (\n  { children },\n  { positionContext },\n) => (\n  <React.Fragment>\n    {\n      React.Children.map(children, (child, index) => {\n        if (!child || !child.type) return child;\n\n        const childPosition = () => {\n          const calculatedPosition =\n            (positionContext && positionContext()) || [];\n          return [...calculatedPosition, index];\n        };\n\n        if (child.type[INDEXABLE_COMPONENT] === true) {\n          return React.cloneElement(child, { position: childPosition });\n        }\n\n        return (\n          <PluginIndexerContext position={childPosition}>\n            {child}\n          </PluginIndexerContext>\n        );\n      })\n    }\n  </React.Fragment>\n);\n\nPluginIndexer.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n};\n\nPluginIndexer.defaultProps = {\n  children: null,\n};\n\nPluginIndexer.contextTypes = {\n  positionContext: PropTypes.func,\n};\n\nclass PluginIndexerContext extends React.Component {\n  getChildContext() {\n    return {\n      positionContext: this.props.position,\n    };\n  }\n  render() {\n    return this.props.children;\n  }\n}\n\nPluginIndexerContext.propTypes = {\n  position: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nPluginIndexerContext.childContextTypes = {\n  positionContext: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { INDEXABLE_COMPONENT } from './plugin-indexer';\n\nexport const RERENDER_TEMPLATE = 'rerenderTemplate';\nlet globalTemplateId = 0;\nexport class Template extends React.PureComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n  }\n  componentWillMount() {\n    const { pluginHost } = this.context;\n    const { name } = this.props;\n\n    this.plugin = {\n      position: () => this.props.position(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (this.props.predicate ? this.props.predicate(params) : true),\n        children: () => this.props.children,\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n  }\n  componentDidUpdate() {\n    const { pluginHost } = this.context;\n    pluginHost.broadcast(RERENDER_TEMPLATE, this.id);\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n  render() {\n    return null;\n  }\n}\n\nTemplate[INDEXABLE_COMPONENT] = true;\n\nTemplate.propTypes = {\n  position: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  predicate: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node,\n  ]),\n};\n\nTemplate.defaultProps = {\n  predicate: null,\n  children: null,\n  position: null,\n};\n\nTemplate.contextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport { RERENDER_TEMPLATE } from './template';\n\nexport class TemplatePlaceholder extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.subscription = {\n      [RERENDER_TEMPLATE]: (id) => {\n        if (this.template && this.template.id === id) {\n          this.forceUpdate();\n        }\n      },\n    };\n  }\n  getChildContext() {\n    return {\n      templateHost: {\n        templates: () => this.restTemplates,\n        params: () => this.params,\n      },\n    };\n  }\n  componentWillMount() {\n    const { pluginHost } = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n  shouldComponentUpdate(nextProps) {\n    const { params } = this.getRenderingData(nextProps);\n    return !shallowEqual(params, this.params) || this.props.children !== nextProps.children;\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n  getRenderingData(props) {\n    const { name, params } = props;\n    if (name) {\n      const { pluginHost } = this.context;\n      return {\n        params,\n        templates: pluginHost.collect(`${name}Template`)\n          .filter(template => template.predicate(params))\n          .reverse(),\n      };\n    }\n    const { templateHost } = this.context;\n    return {\n      params: params || templateHost.params(),\n      templates: templateHost.templates(),\n    };\n  }\n  render() {\n    const { params, templates } = this.getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    this.restTemplates = templates.slice(1);\n\n    let content = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent();\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return templatePlaceholder ? templatePlaceholder(content) : content;\n  }\n}\n\nTemplatePlaceholder.propTypes = {\n  name: PropTypes.string, // eslint-disable-line react/no-unused-prop-types\n  params: PropTypes.object, // eslint-disable-line react/no-unused-prop-types\n  children: PropTypes.func,\n};\n\nTemplatePlaceholder.defaultProps = {\n  name: undefined,\n  params: undefined,\n  children: undefined,\n};\n\nTemplatePlaceholder.contextTypes = {\n  templateHost: PropTypes.object,\n  pluginHost: PropTypes.object.isRequired,\n};\n\nTemplatePlaceholder.childContextTypes = {\n  templateHost: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { Template } from './template';\nimport { TemplatePlaceholder } from './template-placeholder';\n\nexport class PluginHost extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n  getChildContext() {\n    return {\n      pluginHost: this.host,\n    };\n  }\n  render() {\n    const { children } = this.props;\n\n    return (\n      <React.Fragment>\n        <PluginIndexer>\n          <Template name=\"root\" />\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </React.Fragment>\n    );\n  }\n}\n\nPluginHost.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n};\n\nPluginHost.defaultProps = {\n  children: null,\n};\n\nPluginHost.childContextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { PluginIndexer } from './plugin-indexer';\n\nexport class PluginContainer extends React.PureComponent {\n  componentWillMount() {\n    const { pluginHost, positionContext: position } = this.context;\n    const { pluginName, dependencies } = this.props;\n    this.plugin = {\n      position,\n      pluginName,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n  }\n  componentWillUpdate() {\n    this.context.pluginHost.ensureDependencies();\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nPluginContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n  pluginName: PropTypes.string,\n  dependencies: PropTypes.arrayOf(PropTypes.shape({\n    pluginName: PropTypes.string,\n    optional: PropTypes.bool,\n  })),\n};\n\nPluginContainer.defaultProps = {\n  pluginName: '',\n  dependencies: [],\n};\n\nPluginContainer.contextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n  positionContext: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { INDEXABLE_COMPONENT } from './plugin-indexer';\n\nexport class Action extends React.PureComponent {\n  componentWillMount() {\n    const { pluginHost } = this.context;\n    const { name } = this.props;\n\n    this.plugin = {\n      position: () => this.props.position(),\n      [`${name}Action`]: (params, getters, actions) => {\n        const { action } = this.props;\n        action(params, getters, actions);\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n  render() {\n    return null;\n  }\n}\n\nAction[INDEXABLE_COMPONENT] = true;\n\nAction.propTypes = {\n  position: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  action: PropTypes.func.isRequired,\n};\n\nAction.defaultProps = {\n  position: null,\n};\n\nAction.contextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n};\n","import { shallowEqual } from '@devexpress/dx-core';\n\nexport const getActionExecutor = (pluginHost, actionToExecuteName) => {\n  const actionsToExecute = pluginHost.collect(`${actionToExecuteName}Action`).slice().reverse();\n  return (startingPayload) => {\n    let payload = startingPayload;\n    // eslint-disable-next-line no-use-before-define\n    const { getters } = getAvailableGetters(pluginHost);\n    // eslint-disable-next-line no-use-before-define\n    const actions = getAvailableActions(\n      pluginHost,\n      actionName => (actionName === actionToExecuteName\n        ? (newPayload) => { payload = newPayload; }\n        : getActionExecutor(pluginHost, actionName)\n      ),\n    );\n    for (let i = 0; i < actionsToExecute.length; i += 1) {\n      const result = actionsToExecute[i](payload, getters, actions);\n      if (result === false) {\n        break;\n      }\n    }\n  };\n};\n\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n  const getters = pluginHost.knownKeys('Getter')\n    .reduce((acc, getterName) => {\n      Object.defineProperty(acc, getterName, {\n        get: () => {\n          const result = getGetterValue(getterName);\n          trackedDependencies[getterName] = result;\n          return result;\n        },\n      });\n      return acc;\n    }, {});\n\n  return { getters, trackedDependencies };\n};\n\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => getActionExecutor(pluginHost, actionName),\n) =>\n  pluginHost.knownKeys('Action')\n    .reduce((acc, actionName) => {\n      Object.defineProperty(acc, actionName, {\n        get: () => getAction(actionName),\n      });\n      return acc;\n    }, {});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from '../utils/plugin-helpers';\nimport { INDEXABLE_COMPONENT } from './plugin-indexer';\n\nexport const UPDATE_CONNECTION = 'updateConnection';\n\nexport class Getter extends React.PureComponent {\n  componentWillMount() {\n    const { pluginHost } = this.context;\n    const { name } = this.props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => this.props.position(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (value !== undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed &&\n          !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n  componentDidUpdate() {\n    const { pluginHost } = this.context;\n\n    pluginHost.broadcast(UPDATE_CONNECTION);\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n  render() {\n    return null;\n  }\n}\n\nGetter[INDEXABLE_COMPONENT] = true;\n\nGetter.propTypes = {\n  position: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.any,\n  computed: PropTypes.func,\n};\n\nGetter.defaultProps = {\n  value: undefined,\n  computed: null,\n  position: null,\n};\n\nGetter.contextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { UPDATE_CONNECTION } from './getter';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from '../utils/plugin-helpers';\n\nexport class TemplateConnector extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION]: () => this.updateConnection(),\n    };\n  }\n  componentWillMount() {\n    const { pluginHost } = this.context;\n    pluginHost.registerSubscription(this.subscription);\n\n    this.prepareForRendering();\n  }\n  componentWillReceiveProps(props) {\n    this.prepareForRendering(props);\n  }\n  componentWillUnmount() {\n    const { pluginHost } = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n  prepareForRendering(props) {\n    const children = props ? props.children : this.props.children;\n    const { pluginHost } = this.context;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    this.setState({ children: children(getters, actions) });\n  }\n  updateConnection() {\n    const { pluginHost } = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.prepareForRendering();\n      this.forceUpdate();\n    }\n  }\n  render() {\n    return this.state.children;\n  }\n}\nTemplateConnector.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nTemplateConnector.contextTypes = {\n  pluginHost: PropTypes.object.isRequired,\n};\n","const TIMEOUT = 180;\n\nexport class TouchStrategy {\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n  isDragging() {\n    return this.dragging;\n  }\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = null;\n  }\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover = null;\nexport const toggleGestureCover = (toggle, cursor) => {\n  let style = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = ({ x: initialX, y: initialY }, { x, y }) =>\n  clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x ||\n  clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\nexport class MouseStrategy {\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n  isDragging() {\n    return this.dragging;\n  }\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        if (window.getSelection) {\n          window.getSelection().removeAllRanges();\n        }\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const { cursor } = window.getComputedStyle(document.elementFromPoint(x, y));\n      toggleGestureCover(true, cursor);\n    }\n  }\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter = null;\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name =>\n        window.addEventListener(name, e => eventEmitter.emit([name, e]), { passive: false }));\n  }\n  return eventEmitter;\n};\n","/* globals document:true window:true */\n\nexport const clear = () => {\n  if (window.getSelection) {\n    if (window.getSelection().empty) {\n      window.getSelection().empty();\n    } else if (window.getSelection().removeAllRanges) {\n      window.getSelection().removeAllRanges();\n    }\n  } else if (document.selection) {\n    document.selection.empty();\n  }\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n// eslint-disable-next-line camelcase\nimport { unstable_batchedUpdates, findDOMNode } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\n\nconst draggingHandled = Symbol('draggingHandled');\n\nexport class Draggable extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.children !== this.props.children;\n  }\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n  componentWillUnmount() {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n  setupNodeSubscription() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const node = findDOMNode(this);\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener, { passive: true });\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n  }\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n  render() {\n    return this.props.children;\n  }\n}\n\nDraggable.propTypes = {\n  children: PropTypes.node.isRequired,\n  onStart: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onEnd: PropTypes.func,\n};\n\nDraggable.defaultProps = {\n  onStart: undefined,\n  onUpdate: undefined,\n  onEnd: undefined,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nclass DragDropProviderCore {\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ payload: this.payload, clientOffset });\n  }\n  update(clientOffset) {\n    this.dragEmitter.emit({ payload: this.payload, clientOffset });\n  }\n  end(clientOffset) {\n    this.dragEmitter.emit({ payload: this.payload, clientOffset, end: true });\n    this.payload = null;\n  }\n}\n\nexport class DragDropProvider extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      this.props.onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n  getChildContext() {\n    return {\n      dragDropProvider: this.dragDropProvider,\n    };\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.children !== this.props.children;\n  }\n  render() {\n    return this.props.children;\n  }\n}\n\nDragDropProvider.childContextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDragDropProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  onChange: PropTypes.func,\n};\n\nDragDropProvider.defaultProps = {\n  onChange: () => {},\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Draggable } from '../draggable';\n\nexport class DragSource extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    return nextProps.children !== this.props.children;\n  }\n  render() {\n    const { dragDropProvider } = this.context;\n    const { onStart, onUpdate, onEnd } = this.props;\n    return (\n      <Draggable\n        onStart={({ x, y }) => {\n          dragDropProvider.start(this.props.payload, { x, y });\n          onStart({ clientOffset: { x, y } });\n        }}\n        onUpdate={({ x, y }) => {\n          dragDropProvider.update({ x, y });\n          onUpdate({ clientOffset: { x, y } });\n        }}\n        onEnd={({ x, y }) => {\n          dragDropProvider.end({ x, y });\n          onEnd({ clientOffset: { x, y } });\n        }}\n      >\n        {this.props.children}\n      </Draggable>\n    );\n  }\n}\n\nDragSource.contextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDragSource.propTypes = {\n  children: PropTypes.node.isRequired,\n  payload: PropTypes.any.isRequired,\n  onStart: PropTypes.func,\n  onUpdate: PropTypes.func,\n  onEnd: PropTypes.func,\n};\n\nDragSource.defaultProps = {\n  onStart: () => {},\n  onUpdate: () => {},\n  onEnd: () => {},\n};\n","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nexport class DropTarget extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.node = null;\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n  }\n  componentWillMount() {\n    const { dragDropProvider: { dragEmitter } } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.children !== this.props.children;\n  }\n  componentWillUnmount() {\n    const { dragDropProvider: { dragEmitter } } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = findDOMNode(this).getBoundingClientRect(); // eslint-disable-line react/no-find-dom-node\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) this.props.onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) this.props.onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) this.props.onLeave({ payload, clientOffset });\n    if (isOver && end) this.props.onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n\nDropTarget.contextTypes = {\n  dragDropProvider: PropTypes.object.isRequired,\n};\n\nDropTarget.propTypes = {\n  children: PropTypes.node.isRequired,\n  onEnter: PropTypes.func,\n  onOver: PropTypes.func,\n  onLeave: PropTypes.func,\n  onDrop: PropTypes.func,\n};\n\nDropTarget.defaultProps = {\n  onEnter: () => {},\n  onOver: () => {},\n  onLeave: () => {},\n  onDrop: () => {},\n};\n","import React from 'react';\n\nexport const createRenderComponent = (Component, initialAdditionalProps) => {\n  let storedAdditionalProps = initialAdditionalProps;\n  const components = new Set();\n  class RenderComponent extends React.Component {\n    componentWillMount() {\n      components.add(this);\n    }\n    componentWillUnmount() {\n      components.delete(this);\n    }\n    render() {\n      return <Component {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  return {\n    component: RenderComponent,\n    update: (additionalProps) => {\n      storedAdditionalProps = additionalProps;\n      Array.from(components.values())\n        .forEach(component => component.forceUpdate());\n    },\n  };\n};\n"],"names":["INDEXABLE_COMPONENT","Symbol","PluginIndexer","children","positionContext","Children","map","child","index","type","childPosition","calculatedPosition","React","cloneElement","position","propTypes","PropTypes","oneOfType","arrayOf","node","defaultProps","contextTypes","func","PluginIndexerContext","props","Component","isRequired","childContextTypes","RERENDER_TEMPLATE","globalTemplateId","Template","context","id","pluginHost","name","plugin","predicate","params","registerPlugin","broadcast","unregisterPlugin","PureComponent","string","object","TemplatePlaceholder","subscription","template","forceUpdate","restTemplates","registerSubscription","nextProps","getRenderingData","shallowEqual","unregisterSubscription","collect","filter","reverse","templateHost","templates","slice","content","templateContent","templatePlaceholder","undefined","PluginHost","host","PluginHostCore","PluginContainer","pluginName","dependencies","ensureDependencies","shape","bool","Action","getters","actions","action","getActionExecutor","actionToExecuteName","actionsToExecute","startingPayload","payload","getAvailableGetters","getAvailableActions","actionName","newPayload","i","length","result","getGetterValue","get","getterName","trackedDependencies","knownKeys","reduce","acc","defineProperty","isTrackedDependenciesChanged","prevTrackedDependencies","Object","keys","assign","getAction","UPDATE_CONNECTION","Getter","lastComputed","lastTrackedDependencies","lastResult","original","value","computed","any","TemplateConnector","updateConnection","prepareForRendering","setState","state","TIMEOUT","TouchStrategy","delegate","touchStartTimeout","dragging","e","touches","x","clientX","y","clientY","setTimeout","onStart","cancelWaiting","preventDefault","onMove","changedTouches","onEnd","mouseInitialOffset","gestureCover","toggleGestureCover","toggle","cursor","style","document","createElement","body","appendChild","forEach","key","BOUNDARY","clamp","min","max","Math","isBoundExceeded","initialX","initialY","MouseStrategy","dragStarted","window","getSelection","removeAllRanges","getComputedStyle","elementFromPoint","eventEmitter","getSharedEventEmitter","EventEmitter","addEventListener","emit","passive","clear","empty","selection","draggingHandled","Draggable","onUpdate","mouseStrategy","touchStrategy","mouseDownListener","bind","touchStartListener","globalListener","subscribe","setupNodeSubscription","unsubscribe","findDOMNode","removeEventListener","isWaiting","start","move","end","isDragging","DragDropProviderCore","dragEmitter","clientOffset","DragDropProvider","dragDropProvider","onChange","DragSource","update","DropTarget","isOver","handleDrag","getBoundingClientRect","left","top","right","bottom","onEnter","onOver","onLeave","onDrop","only","createRenderComponent","initialAdditionalProps","storedAdditionalProps","components","Set","RenderComponent","add","delete","additionalProps","from","values","component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,IAAMA,sBAAsBC,OAAO,oBAAP,CAA5B;;AAEP,IAAaC,gBAAgB,SAAhBA,aAAgB;MACzBC,QADyB,QACzBA,QADyB;MAEzBC,eAFyB,SAEzBA,eAFyB;SAI3B;SAAA,CAAO,QAAP;;UAEUC,QAAN,CAAeC,GAAf,CAAmBH,QAAnB,EAA6B,UAACI,KAAD,EAAQC,KAAR,EAAkB;UACzC,CAACD,KAAD,IAAU,CAACA,MAAME,IAArB,EAA2B,OAAOF,KAAP;;UAErBG,gBAAgB,SAAhBA,aAAgB,GAAM;YACpBC,qBACHP,mBAAmBA,iBAApB,IAA0C,EAD5C;2CAEWO,kBAAX,IAA+BH,KAA/B;OAHF;;UAMID,MAAME,IAAN,CAAWT,mBAAX,MAAoC,IAAxC,EAA8C;eACrCY,MAAMC,YAAN,CAAmBN,KAAnB,EAA0B,EAAEO,UAAUJ,aAAZ,EAA1B,CAAP;;;aAIA;4BAAA;UAAsB,UAAUA,aAAhC;;OADF;KAbF;GANuB;CAAtB;;AA6BPR,cAAca,SAAd,GAA0B;YACdC,UAAUC,SAAV,CAAoB,CAC5BD,UAAUE,OAAV,CAAkBF,UAAUG,IAA5B,CAD4B,EAE5BH,UAAUG,IAFkB,CAApB;CADZ;;AAOAjB,cAAckB,YAAd,GAA6B;YACjB;CADZ;;AAIAlB,cAAcmB,YAAd,GAA6B;mBACVL,UAAUM;CAD7B;;IAIMC;;;;;;;;;;sCACc;aACT;yBACY,KAAKC,KAAL,CAAWV;OAD9B;;;;6BAIO;aACA,KAAKU,KAAL,CAAWrB,QAAlB;;;;EAP+BS,MAAMa;;AAWzCF,qBAAqBR,SAArB,GAAiC;YACrBC,UAAUM,IAAV,CAAeI,UADM;YAErBV,UAAUG,IAAV,CAAeO;CAF3B;;AAKAH,qBAAqBI,iBAArB,GAAyC;mBACtBX,UAAUM;CAD7B;;AC7DO,IAAMM,oBAAoB,kBAA1B;AACP,IAAIC,mBAAmB,CAAvB;AACA,IAAaC,QAAb;;;oBACcN,KAAZ,EAAmBO,OAAnB,EAA4B;;;mHACpBP,KADoB,EACbO,OADa;;wBAGN,CAApB;UACKC,EAAL,GAAUH,gBAAV;;;;;;yCAEmB;;;UACXI,UADW,GACI,KAAKF,OADT,CACXE,UADW;UAEXC,IAFW,GAEF,KAAKV,KAFH,CAEXU,IAFW;;;WAIdC,MAAL;kBACY;iBAAM,OAAKX,KAAL,CAAWV,QAAX,EAAN;;SACNoB,IAFN,eAEuB;YACf,KAAKF,EADU;mBAER;iBAAW,OAAKR,KAAL,CAAWY,SAAX,GAAuB,OAAKZ,KAAL,CAAWY,SAAX,CAAqBC,MAArB,CAAvB,GAAsD,IAAjE;SAFQ;kBAGT;iBAAM,OAAKb,KAAL,CAAWrB,QAAjB;;OALd;iBAQWmC,cAAX,CAA0B,KAAKH,MAA/B;;;;yCAEmB;UACXF,UADW,GACI,KAAKF,OADT,CACXE,UADW;;iBAERM,SAAX,CAAqBX,iBAArB,EAAwC,KAAKI,EAA7C;;;;2CAEqB;UACbC,UADa,GACE,KAAKF,OADP,CACbE,UADa;;iBAEVO,gBAAX,CAA4B,KAAKL,MAAjC;;;;6BAEO;aACA,IAAP;;;;EA9B0BvB,MAAM6B,aAApC;;AAkCAX,SAAS9B,mBAAT,IAAgC,IAAhC;;AAEA8B,SAASf,SAAT,GAAqB;YACTC,UAAUM,IADD;QAEbN,UAAU0B,MAAV,CAAiBhB,UAFJ;aAGRV,UAAUM,IAHF;YAITN,UAAUC,SAAV,CAAoB,CAC5BD,UAAUM,IADkB,EAE5BN,UAAUG,IAFkB,CAApB;CAJZ;;AAUAW,SAASV,YAAT,GAAwB;aACX,IADW;YAEZ,IAFY;YAGZ;CAHZ;;AAMAU,SAAST,YAAT,GAAwB;cACVL,UAAU2B,MAAV,CAAiBjB;CAD/B;;ICrDakB,mBAAb;;;+BACcpB,KAAZ,EAAmBO,OAAnB,EAA4B;;;yIACpBP,KADoB,EACbO,OADa;;UAGrBc,YAAL,sBACGjB,iBADH,EACuB,UAACI,EAAD,EAAQ;UACvB,MAAKc,QAAL,IAAiB,MAAKA,QAAL,CAAcd,EAAd,KAAqBA,EAA1C,EAA8C;cACvCe,WAAL;;KAHN;;;;;;sCAQgB;;;aACT;sBACS;qBACD;mBAAM,OAAKC,aAAX;WADC;kBAEJ;mBAAM,OAAKX,MAAX;;;OAHZ;;;;yCAOmB;UACXJ,UADW,GACI,KAAKF,OADT,CACXE,UADW;;iBAERgB,oBAAX,CAAgC,KAAKJ,YAArC;;;;0CAEoBK,SAxBxB,EAwBmC;8BACZ,KAAKC,gBAAL,CAAsBD,SAAtB,CADY;UACvBb,MADuB,qBACvBA,MADuB;;aAExB,CAACe,aAAaf,MAAb,EAAqB,KAAKA,MAA1B,CAAD,IAAsC,KAAKb,KAAL,CAAWrB,QAAX,KAAwB+C,UAAU/C,QAA/E;;;;2CAEqB;UACb8B,UADa,GACE,KAAKF,OADP,CACbE,UADa;;iBAEVoB,sBAAX,CAAkC,KAAKR,YAAvC;;;;qCAEerB,KAhCnB,EAgC0B;UACdU,IADc,GACGV,KADH,CACdU,IADc;UACRG,MADQ,GACGb,KADH,CACRa,MADQ;;UAElBH,IAAJ,EAAU;YACAD,UADA,GACe,KAAKF,OADpB,CACAE,UADA;;eAED;wBAAA;qBAEMA,WAAWqB,OAAX,CAAsBpB,IAAtB,eACRqB,MADQ,CACD;mBAAYT,SAASV,SAAT,CAAmBC,MAAnB,CAAZ;WADC,EAERmB,OAFQ;SAFb;;UAOMC,YAXc,GAWG,KAAK1B,OAXR,CAWd0B,YAXc;;aAYf;gBACGpB,UAAUoB,aAAapB,MAAb,EADb;mBAEMoB,aAAaC,SAAb;OAFb;;;;6BAKO;+BACuB,KAAKP,gBAAL,CAAsB,KAAK3B,KAA3B,CADvB;UACCa,MADD,sBACCA,MADD;UACSqB,SADT,sBACSA,SADT;;WAGFrB,MAAL,GAAcA,MAAd;;qCACkBqB,SAJX;;WAIDZ,QAJC;;WAKFE,aAAL,GAAqBU,UAAUC,KAAV,CAAgB,CAAhB,CAArB;;UAEIC,UAAU,IAAd;UACI,KAAKd,QAAT,EAAmB;YACCe,eADD,GACqB,KAAKf,QAD1B,CACT3C,QADS;;;kBAGP0D,iBAAV;YACID,WAAW,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;oBAClCA,QAAQvB,MAAR,CAAV;;;;UAIcyB,mBAjBX,GAiBmC,KAAKtC,KAjBxC,CAiBCrB,QAjBD;;aAkBA2D,sBAAsBA,oBAAoBF,OAApB,CAAtB,GAAqDA,OAA5D;;;;EAnEqChD,MAAMa,SAA/C;;AAuEAmB,oBAAoB7B,SAApB,GAAgC;QACxBC,UAAU0B,MADc;UAEtB1B,UAAU2B,MAFY;YAGpB3B,UAAUM;CAHtB;;AAMAsB,oBAAoBxB,YAApB,GAAmC;QAC3B2C,SAD2B;UAEzBA,SAFyB;YAGvBA;CAHZ;;AAMAnB,oBAAoBvB,YAApB,GAAmC;gBACnBL,UAAU2B,MADS;cAErB3B,UAAU2B,MAAV,CAAiBjB;CAF/B;;AAKAkB,oBAAoBjB,iBAApB,GAAwC;gBACxBX,UAAU2B,MAAV,CAAiBjB;CADjC;;ICtFasC,YAAb;;;yBACcxC,KAAZ,EAAmB;;;6HACXA,KADW;;UAGZyC,IAAL,GAAY,IAAIC,UAAJ,EAAZ;;;;;;sCAEgB;aACT;oBACO,KAAKD;OADnB;;;;6BAIO;UACC9D,QADD,GACc,KAAKqB,KADnB,CACCrB,QADD;;;aAIL;aAAA,CAAO,QAAP;;;uBACE;;8BACG,QAAD,IAAU,MAAK,MAAf,GADF;;SADF;4BAKG,mBAAD,IAAqB,MAAK,MAA1B;OANJ;;;;EAd4BS,MAAM6B,aAAtC;;AA0BAuB,aAAWjD,SAAX,GAAuB;YACXC,UAAUC,SAAV,CAAoB,CAC5BD,UAAUE,OAAV,CAAkBF,UAAUG,IAA5B,CAD4B,EAE5BH,UAAUG,IAFkB,CAApB;CADZ;;AAOA6C,aAAW5C,YAAX,GAA0B;YACd;CADZ;;AAIA4C,aAAWrC,iBAAX,GAA+B;cACjBX,UAAU2B,MAAV,CAAiBjB;CAD/B;;ICxCayC,eAAb;;;;;;;;;;yCACuB;qBAC+B,KAAKpC,OADpC;UACXE,UADW,YACXA,UADW;UACkBnB,QADlB,YACCV,eADD;mBAEkB,KAAKoB,KAFvB;UAEX4C,UAFW,UAEXA,UAFW;UAECC,YAFD,UAECA,YAFD;;WAGdlC,MAAL,GAAc;0BAAA;8BAAA;kCAAA;mBAID;OAJb;iBAMWG,cAAX,CAA0B,KAAKH,MAA/B;;;;0CAEoB;WACfJ,OAAL,CAAaE,UAAb,CAAwBqC,kBAAxB;;;;2CAEqB;UACbrC,UADa,GACE,KAAKF,OADP,CACbE,UADa;;iBAEVO,gBAAX,CAA4B,KAAKL,MAAjC;;;;6BAEO;UACChC,QADD,GACc,KAAKqB,KADnB,CACCrB,QADD;;aAGL;qBAAA;;;OADF;;;;EArBiCS,MAAM6B,aAA3C;;AA6BA0B,gBAAgBpD,SAAhB,GAA4B;YAChBC,UAAUG,IAAV,CAAeO,UADC;cAEdV,UAAU0B,MAFI;gBAGZ1B,UAAUE,OAAV,CAAkBF,UAAUuD,KAAV,CAAgB;gBAClCvD,UAAU0B,MADwB;cAEpC1B,UAAUwD;GAFU,CAAlB;CAHhB;;AASAL,gBAAgB/C,YAAhB,GAA+B;cACjB,EADiB;gBAEf;CAFhB;;AAKA+C,gBAAgB9C,YAAhB,GAA+B;cACjBL,UAAU2B,MAAV,CAAiBjB,UADA;mBAEZV,UAAUM,IAAV,CAAeI;CAFlC;;IC3Ca+C,MAAb;;;;;;;;;;yCACuB;;;UACXxC,UADW,GACI,KAAKF,OADT,CACXE,UADW;UAEXC,IAFW,GAEF,KAAKV,KAFH,CAEXU,IAFW;;;WAIdC,MAAL;kBACY;iBAAM,OAAKX,KAAL,CAAWV,QAAX,EAAN;;SACNoB,IAFN,aAEqB,mBAACG,MAAD,EAASqC,OAAT,EAAkBC,OAAlB,EAA8B;YACvCC,MADuC,GAC5B,OAAKpD,KADuB,CACvCoD,MADuC;;eAExCvC,MAAP,EAAeqC,OAAf,EAAwBC,OAAxB;OAJJ;;iBAQWrC,cAAX,CAA0B,KAAKH,MAA/B;;;;2CAEqB;UACbF,UADa,GACE,KAAKF,OADP,CACbE,UADa;;;iBAGVO,gBAAX,CAA4B,KAAKL,MAAjC;;;;6BAEO;aACA,IAAP;;;;EArBwBvB,MAAM6B,aAAlC;;AAyBAgC,OAAOzE,mBAAP,IAA8B,IAA9B;;AAEAyE,OAAO1D,SAAP,GAAmB;YACPC,UAAUM,IADH;QAEXN,UAAU0B,MAAV,CAAiBhB,UAFN;UAGTV,UAAUM,IAAV,CAAeI;CAHzB;;AAMA+C,OAAOrD,YAAP,GAAsB;YACV;CADZ;;AAIAqD,OAAOpD,YAAP,GAAsB;cACRL,UAAU2B,MAAV,CAAiBjB;CAD/B;;ACvCO,IAAMmD,oBAAoB,SAApBA,iBAAoB,CAAC5C,UAAD,EAAa6C,mBAAb,EAAqC;MAC9DC,mBAAmB9C,WAAWqB,OAAX,CAAsBwB,mBAAtB,aAAmDnB,KAAnD,GAA2DH,OAA3D,EAAzB;SACO,UAACwB,eAAD,EAAqB;QACtBC,UAAUD,eAAd;;;+BAEoBE,oBAAoBjD,UAApB,CAHM;QAGlByC,OAHkB,wBAGlBA,OAHkB;;;;QAKpBC,UAAUQ,oBACdlD,UADc,EAEd;aAAemD,eAAeN,mBAAf,GACX,UAACO,UAAD,EAAgB;kBAAYA,UAAV;OADP,GAEXR,kBAAkB5C,UAAlB,EAA8BmD,UAA9B,CAFJ;KAFc,CAAhB;SAOK,IAAIE,IAAI,CAAb,EAAgBA,IAAIP,iBAAiBQ,MAArC,EAA6CD,KAAK,CAAlD,EAAqD;UAC7CE,SAAST,iBAAiBO,CAAjB,EAAoBL,OAApB,EAA6BP,OAA7B,EAAsCC,OAAtC,CAAf;UACIa,WAAW,KAAf,EAAsB;;;;GAd1B;CAFK;;AAuBP,IAAaN,sBAAsB,SAAtBA,mBAAsB,CACjCjD,UADiC,EAG9B;MADHwD,cACG,uEADc;WAAcxD,WAAWyD,GAAX,CAAkBC,UAAlB,YAAd;GACd;;MACGC,sBAAsB,EAA5B;MACMlB,UAAUzC,WAAW4D,SAAX,CAAqB,QAArB,EACbC,MADa,CACN,UAACC,GAAD,EAAMJ,UAAN,EAAqB;WACpBK,cAAP,CAAsBD,GAAtB,EAA2BJ,UAA3B,EAAuC;WAChC,kBAAM;YACHH,SAASC,eAAeE,UAAf,CAAf;4BACoBA,UAApB,IAAkCH,MAAlC;eACOA,MAAP;;KAJJ;WAOOO,GAAP;GATY,EAUX,EAVW,CAAhB;;SAYO,EAAErB,gBAAF,EAAWkB,wCAAX,EAAP;CAjBK;;AAoBP,IAAaK,+BAA+B,SAA/BA,4BAA+B,CAC1ChE,UAD0C,EAE1CiE,uBAF0C,EAIvC;MADHT,cACG,uEADc;WAAcxD,WAAWyD,GAAX,CAAkBC,UAAlB,YAAd;GACd;;MACGC,sBAAsBO,OAAOC,IAAP,CAAYF,uBAAZ,EACzBJ,MADyB,CAClB,UAACC,GAAD,EAAMJ,UAAN;WAAqBQ,OAAOE,MAAP,CAAcN,GAAd,qBAC1BJ,UAD0B,EACbF,eAAeE,UAAf,CADa,EAArB;GADkB,EAGtB,EAHsB,CAA5B;;SAKO,CAACvC,aAAa8C,uBAAb,EAAsCN,mBAAtC,CAAR;CAVK;;AAaP,IAAaT,sBAAsB,SAAtBA,mBAAsB,CACjClD,UADiC;MAEjCqE,SAFiC,uEAErB;WAAczB,kBAAkB5C,UAAlB,EAA8BmD,UAA9B,CAAd;GAFqB;SAIjCnD,WAAW4D,SAAX,CAAqB,QAArB,EACGC,MADH,CACU,UAACC,GAAD,EAAMX,UAAN,EAAqB;WACpBY,cAAP,CAAsBD,GAAtB,EAA2BX,UAA3B,EAAuC;WAChC;eAAMkB,UAAUlB,UAAV,CAAN;;KADP;WAGOW,GAAP;GALJ,EAMK,EANL,CAJiC;CAA5B;;ACjDA,IAAMQ,oBAAoB,kBAA1B;;AAEP,IAAaC,MAAb;;;;;;;;;;yCACuB;;;UACXvE,UADW,GACI,KAAKF,OADT,CACXE,UADW;UAEXC,IAFW,GAEF,KAAKV,KAFH,CAEXU,IAFW;;;UAIfuE,qBAAJ;UACIC,0BAA0B,EAA9B;UACIC,mBAAJ;;WAEKxE,MAAL;kBACY;iBAAM,OAAKX,KAAL,CAAWV,QAAX,EAAN;;SACNoB,IAFN;;;;;;;;;;QAEqB,UAAC0E,QAAD,EAAc;qBACH,OAAKpF,KADF;YACvBqF,KADuB,UACvBA,KADuB;YAChBC,QADgB,UAChBA,QADgB;;YAE3BD,UAAU9C,SAAd,EAAyB,OAAO8C,KAAP;;YAEnBpB,iBAAiB,SAAjBA,cAAiB;iBAAgBE,eAAezD,IAAhB,GAClC0E,QADkC,GAElC3E,WAAWyD,GAAX,CAAkBC,UAAlB,aAAsC,OAAKxD,MAA3C,CAFmB;SAAvB;;YAII2E,aAAaL,YAAb,IACF,CAACR,6BAA6BhE,UAA7B,EAAyCyE,uBAAzC,EAAkEjB,cAAlE,CADH,EACsF;iBAC7EkB,UAAP;;;mCAGuCzB,oBAAoBjD,UAApB,EAAgCwD,cAAhC,CAbV;YAavBf,OAbuB,wBAavBA,OAbuB;YAadkB,mBAbc,wBAadA,mBAbc;;YAczBjB,UAAUQ,oBAAoBlD,UAApB,CAAhB;;uBAEe6E,QAAf;kCAC0BlB,mBAA1B;qBACakB,SAASpC,OAAT,EAAkBC,OAAlB,CAAb;eACOgC,UAAP;OArBJ;;iBAyBWrE,cAAX,CAA0B,KAAKH,MAA/B;;;;yCAEmB;UACXF,UADW,GACI,KAAKF,OADT,CACXE,UADW;;;iBAGRM,SAAX,CAAqBgE,iBAArB;;;;2CAEqB;UACbtE,UADa,GACE,KAAKF,OADP,CACbE,UADa;;;iBAGVO,gBAAX,CAA4B,KAAKL,MAAjC;;;;6BAEO;aACA,IAAP;;;;EA/CwBvB,MAAM6B,aAAlC;;AAmDA+D,OAAOxG,mBAAP,IAA8B,IAA9B;;AAEAwG,OAAOzF,SAAP,GAAmB;YACPC,UAAUM,IADH;QAEXN,UAAU0B,MAAV,CAAiBhB,UAFN;SAGVV,UAAU+F,GAHA;YAIP/F,UAAUM;CAJtB;;AAOAkF,OAAOpF,YAAP,GAAsB;SACb2C,SADa;YAEV,IAFU;YAGV;CAHZ;;AAMAyC,OAAOnF,YAAP,GAAsB;cACRL,UAAU2B,MAAV,CAAiBjB;CAD/B;;ICpEasF,iBAAb;;;6BACcxF,KAAZ,EAAmBO,OAAnB,EAA4B;;;qIACpBP,KADoB,EACbO,OADa;;UAGrB6D,mBAAL,GAA2B,EAA3B;UACK/C,YAAL,sBACG0D,iBADH,EACuB;aAAM,MAAKU,gBAAL,EAAN;KADvB;;;;;;yCAImB;UACXhF,UADW,GACI,KAAKF,OADT,CACXE,UADW;;iBAERgB,oBAAX,CAAgC,KAAKJ,YAArC;;WAEKqE,mBAAL;;;;8CAEwB1F,KAf5B,EAemC;WAC1B0F,mBAAL,CAAyB1F,KAAzB;;;;2CAEqB;UACbS,UADa,GACE,KAAKF,OADP,CACbE,UADa;;iBAEVoB,sBAAX,CAAkC,KAAKR,YAAvC;;;;wCAEkBrB,KAtBtB,EAsB6B;UACnBrB,WAAWqB,QAAQA,MAAMrB,QAAd,GAAyB,KAAKqB,KAAL,CAAWrB,QAArD;UACQ8B,UAFiB,GAEF,KAAKF,OAFH,CAEjBE,UAFiB;;iCAIgBiD,oBAAoBjD,UAApB,CAJhB;UAIjByC,OAJiB,wBAIjBA,OAJiB;UAIRkB,mBAJQ,wBAIRA,mBAJQ;;WAKpBA,mBAAL,GAA2BA,mBAA3B;UACMjB,UAAUQ,oBAAoBlD,UAApB,CAAhB;;WAEKkF,QAAL,CAAc,EAAEhH,UAAUA,SAASuE,OAAT,EAAkBC,OAAlB,CAAZ,EAAd;;;;uCAEiB;UACT1C,UADS,GACM,KAAKF,OADX,CACTE,UADS;;;UAGbgE,6BAA6BhE,UAA7B,EAAyC,KAAK2D,mBAA9C,CAAJ,EAAwE;aACjEsB,mBAAL;aACKnE,WAAL;;;;;6BAGK;aACA,KAAKqE,KAAL,CAAWjH,QAAlB;;;;EAzCmCS,MAAMa,SAA7C;AA4CAuF,kBAAkBjG,SAAlB,GAA8B;YAClBC,UAAUM,IAAV,CAAeI;CAD3B;;AAIAsF,kBAAkB3F,YAAlB,GAAiC;cACnBL,UAAU2B,MAAV,CAAiBjB;CAD/B;;ACzDA,IAAM2F,UAAU,GAAhB;;AAEA,IAAaC,aAAb;yBACcC,QAAZ,EAAsB;;;SACfA,QAAL,GAAgBA,QAAhB;SACKC,iBAAL,GAAyB,IAAzB;SACKC,QAAL,GAAgB,KAAhB;;;;;iCAEW;aACJ,KAAKA,QAAZ;;;;gCAEU;aACH,CAAC,CAAC,KAAKD,iBAAd;;;;oCAEc;mBACD,KAAKA,iBAAlB;WACKA,iBAAL,GAAyB,IAAzB;;;;0BAEIE,CAhBR,EAgBW;;;wBAC4BA,EAAEC,OAAF,CAAU,CAAV,CAD5B;UACUC,CADV,eACCC,OADD;UACsBC,CADtB,eACaC,OADb;;WAEFP,iBAAL,GAAyBQ,WAAW,YAAM;cACnCT,QAAL,CAAcU,OAAd,CAAsB,EAAEL,IAAF,EAAKE,IAAL,EAAtB;cACKL,QAAL,GAAgB,IAAhB;OAFuB,EAGtBJ,OAHsB,CAAzB;;;;yBAKGK,CAvBP,EAuBU;WACDQ,aAAL;UACI,KAAKT,QAAT,EAAmB;2BACYC,EAAEC,OAAF,CAAU,CAAV,CADZ;YACTE,OADS,gBACTA,OADS;YACAE,OADA,gBACAA,OADA;;UAEfI,cAAF;aACKZ,QAAL,CAAca,MAAd,CAAqB,EAAER,GAAGC,OAAL,EAAcC,GAAGC,OAAjB,EAArB;;;;;wBAGAL,CA/BN,EA+BS;WACAQ,aAAL;UACI,KAAKT,QAAT,EAAmB;iCACYC,EAAEW,cAAF,CAAiB,CAAjB,CADZ;YACTR,OADS,sBACTA,OADS;YACAE,OADA,sBACAA,OADA;;aAEZR,QAAL,CAAce,KAAd,CAAoB,EAAEV,GAAGC,OAAL,EAAcC,GAAGC,OAAjB,EAApB;;WAEGQ,kBAAL,GAA0B,IAA1B;WACKd,QAAL,GAAgB,KAAhB;;;;;;ACxCJ;;AAEA,IAAIe,eAAe,IAAnB;AACA,IAAaC,qBAAqB,SAArBA,kBAAqB,CAACC,MAAD,EAASC,MAAT,EAAoB;MAChDC,QAAQ;mBACKF,SAAS,KAAT,GAAiB;GADlC;MAGIA,UAAUC,MAAd,EAAsB;yBAEfC,KADL;;;;MAKE,CAACJ,YAAL,EAAmB;yBAEZI,KADL;gBAEY,OAFZ;WAGO,CAHP;aAIS,CAJT;YAKQ,CALR;cAMU,CANV;eAOW,CAPX;cAQU;;;mBAGKC,SAASC,aAAT,CAAuB,KAAvB,CAAf;aACSC,IAAT,CAAcC,WAAd,CAA0BR,YAA1B;;SAEKpC,IAAP,CAAYwC,KAAZ,EAAmBK,OAAnB,CAA2B,UAACC,GAAD,EAAS;iBAAeN,KAAb,CAAmBM,GAAnB,IAA0BN,MAAMM,GAAN,CAA1B;GAAtC;CAzBK;;ACHP;;AAEA,IAEMC,WAAW,EAAjB;AACA,IAAMC,QAAQ,SAARA,KAAQ,CAACvC,KAAD,EAAQwC,GAAR,EAAaC,GAAb;SAAqBC,KAAKD,GAAL,CAASC,KAAKF,GAAL,CAASxC,KAAT,EAAgByC,GAAhB,CAAT,EAA+BD,GAA/B,CAArB;CAAd;AACA,IAAMG,kBAAkB,SAAlBA,eAAkB;MAAMC,QAAN,QAAG7B,CAAH;MAAmB8B,QAAnB,QAAgB5B,CAAhB;MAAiCF,CAAjC,SAAiCA,CAAjC;MAAoCE,CAApC,SAAoCA,CAApC;SACtBsB,MAAMxB,CAAN,EAAS6B,WAAWN,QAApB,EAA8BM,WAAWN,QAAzC,MAAuDvB,CAAvD,IACAwB,MAAMtB,CAAN,EAAS4B,WAAWP,QAApB,EAA8BO,WAAWP,QAAzC,MAAuDrB,CAFjC;CAAxB;;AAIA,IAAa6B,aAAb;yBACcpC,QAAZ,EAAsB;;;SACfA,QAAL,GAAgBA,QAAhB;SACKgB,kBAAL,GAA0B,IAA1B;SACKd,QAAL,GAAgB,KAAhB;;;;;iCAEW;aACJ,KAAKA,QAAZ;;;;0BAEIC,CATR,EASW;UACUE,CADV,GAC4BF,CAD5B,CACCG,OADD;UACsBC,CADtB,GAC4BJ,CAD5B,CACaK,OADb;;WAEFL,CAAL,GAASA,CAAT;WACKa,kBAAL,GAA0B,EAAEX,IAAF,EAAKE,IAAL,EAA1B;;;;yBAEGJ,CAdP,EAcU;UACWE,CADX,GAC6BF,CAD7B,CACEG,OADF;UACuBC,CADvB,GAC6BJ,CAD7B,CACcK,OADd;;UAEF6B,cAAc,KAAlB;UACI,CAAC,KAAKnC,QAAN,IAAkB,KAAKc,kBAA3B,EAA+C;YACzCiB,gBAAgB,KAAKjB,kBAArB,EAAyC,EAAEX,IAAF,EAAKE,IAAL,EAAzC,CAAJ,EAAwD;eACjDP,QAAL,CAAcU,OAAd,CAAsB,KAAKM,kBAA3B;cACIsB,OAAOC,YAAX,EAAyB;mBAChBA,YAAP,GAAsBC,eAAtB;;wBAEY,IAAd;eACKtC,QAAL,GAAgB,IAAhB;;;UAGA,KAAKA,QAAT,EAAmB;UACfU,cAAF;aACKZ,QAAL,CAAca,MAAd,CAAqB,EAAER,IAAF,EAAKE,IAAL,EAArB;;UAEE8B,WAAJ,EAAiB;oCACIC,OAAOG,gBAAP,CAAwBnB,SAASoB,gBAAT,CAA0BrC,CAA1B,EAA6BE,CAA7B,CAAxB,CADJ;YACPa,MADO,yBACPA,MADO;;2BAEI,IAAnB,EAAyBA,MAAzB;;;;;wBAGAjB,CApCN,EAoCS;UACD,KAAKD,QAAT,EAAmB;YACAG,CADA,GACkBF,CADlB,CACTG,OADS;YACYC,CADZ,GACkBJ,CADlB,CACGK,OADH;;2BAEE,KAAnB;aACKR,QAAL,CAAce,KAAd,CAAoB,EAAEV,IAAF,EAAKE,IAAL,EAApB;;WAEGS,kBAAL,GAA0B,IAA1B;WACKd,QAAL,GAAgB,KAAhB;;;;;;ACrDJ;;AAEA,IAEIyC,eAAe,IAAnB;AACA,IAAaC,wBAAwB,SAAxBA,qBAAwB,GAAM;MACrC,CAACD,YAAL,EAAmB;mBACF,IAAIE,YAAJ,EAAf;;KAEC,WAAD,EAAc,SAAd,EAAyB,WAAzB,EAAsC,UAAtC,EAAkD,aAAlD,EACGnB,OADH,CACW;aACPY,OAAOQ,gBAAP,CAAwBnI,IAAxB,EAA8B;eAAKgI,aAAaI,IAAb,CAAkB,CAACpI,IAAD,EAAOwF,CAAP,CAAlB,CAAL;OAA9B,EAAiE,EAAE6C,SAAS,KAAX,EAAjE,CADO;KADX;;SAIKL,YAAP;CARK;;ACLP;;AAEA,IAAaM,QAAQ,SAARA,KAAQ,GAAM;MACrBX,OAAOC,YAAX,EAAyB;QACnBD,OAAOC,YAAP,GAAsBW,KAA1B,EAAiC;aACxBX,YAAP,GAAsBW,KAAtB;KADF,MAEO,IAAIZ,OAAOC,YAAP,GAAsBC,eAA1B,EAA2C;aACzCD,YAAP,GAAsBC,eAAtB;;GAJJ,MAMO,IAAIlB,SAAS6B,SAAb,EAAwB;aACpBA,SAAT,CAAmBD,KAAnB;;CARG;;ACAP;AACA,IAMME,kBAAkB1K,OAAO,iBAAP,CAAxB;;AAEA,IAAa2K,SAAb;;;qBACcpJ,KAAZ,EAAmBO,OAAnB,EAA4B;;;qHACpBP,KADoB,EACbO,OADa;;QAGpBwF,WAAW;eACN,uBAAc;YAAXK,CAAW,QAAXA,CAAW;YAARE,CAAQ,QAARA,CAAQ;YACbG,OADa,GACD,MAAKzG,KADJ,CACbyG,OADa;;YAEjB,CAACA,OAAL,EAAc;gCACU,YAAM;kBACpB,EAAEL,IAAF,EAAKE,IAAL,EAAR;SADF;OAJa;cAQP,uBAAc;YAAXF,CAAW,SAAXA,CAAW;YAARE,CAAQ,SAARA,CAAQ;YACZ+C,QADY,GACC,MAAKrJ,KADN,CACZqJ,QADY;;YAEhB,CAACA,QAAL,EAAe;gCACS,YAAM;mBACnB,EAAEjD,IAAF,EAAKE,IAAL,EAAT;SADF;OAXa;aAeR,sBAAc;YAAXF,CAAW,SAAXA,CAAW;YAARE,CAAQ,SAARA,CAAQ;YACXQ,KADW,GACD,MAAK9G,KADJ,CACX8G,KADW;;YAEf,CAACA,KAAL,EAAY;gCACY,YAAM;gBACtB,EAAEV,IAAF,EAAKE,IAAL,EAAN;SADF;;KAlBJ;;UAwBKgD,aAAL,GAAqB,IAAInB,aAAJ,CAAkBpC,QAAlB,CAArB;UACKwD,aAAL,GAAqB,IAAIzD,aAAJ,CAAkBC,QAAlB,CAArB;;UAEKyD,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,OAAzB;UACKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,OAA1B;UACKE,cAAL,GAAsB,MAAKA,cAAL,CAAoBF,IAApB,OAAtB;;;;;;wCAEkB;8BACMG,SAAxB,CAAkC,KAAKD,cAAvC;WACKE,qBAAL;;;;0CAEoBnI,SAvCxB,EAuCmC;aACxBA,UAAU/C,QAAV,KAAuB,KAAKqB,KAAL,CAAWrB,QAAzC;;;;yCAEmB;WACdkL,qBAAL;;;;2CAEqB;8BACGC,WAAxB,CAAoC,KAAKH,cAAzC;;;;4CAEsB;;UAEhBhK,OAAOoK,YAAY,IAAZ,CAAb;UACI,CAACpK,IAAL,EAAW;WACNqK,mBAAL,CAAyB,WAAzB,EAAsC,KAAKR,iBAA3C;WACKQ,mBAAL,CAAyB,YAAzB,EAAuC,KAAKN,kBAA5C;WACKb,gBAAL,CAAsB,WAAtB,EAAmC,KAAKW,iBAAxC,EAA2D,EAAET,SAAS,IAAX,EAA3D;WACKF,gBAAL,CAAsB,YAAtB,EAAoC,KAAKa,kBAAzC,EAA6D,EAAEX,SAAS,IAAX,EAA7D;;;;sCAEgB7C,CAzDpB,EAyDuB;UACf,KAAKqD,aAAL,CAAmBU,SAAnB,MAAkC/D,EAAEiD,eAAF,CAAtC,EAA0D;WACrDG,aAAL,CAAmBY,KAAnB,CAAyBhE,CAAzB;QACEiD,eAAF,IAAqB,IAArB;;;;uCAEiBjD,CA9DrB,EA8DwB;UAChBA,EAAEiD,eAAF,CAAJ,EAAwB;WACnBI,aAAL,CAAmBW,KAAnB,CAAyBhE,CAAzB;QACEiD,eAAF,IAAqB,IAArB;;;;0CAEwB;;UAAVzI,IAAU;UAAJwF,CAAI;;cAChBxF,IAAR;aACO,WAAL;eACO4I,aAAL,CAAmBa,IAAnB,CAAwBjE,CAAxB;;aAEG,SAAL;eACOoD,aAAL,CAAmBc,GAAnB,CAAuBlE,CAAvB;;aAEG,WAAL;;iBACOqD,aAAL,CAAmBY,IAAnB,CAAwBjE,CAAxB;;;aAGG,UAAL;aACK,aAAL;;iBACOqD,aAAL,CAAmBa,GAAnB,CAAuBlE,CAAvB;;;;;;UAMA,KAAKoD,aAAL,CAAmBe,UAAnB,MAAmC,KAAKd,aAAL,CAAmBc,UAAnB,EAAvC,EAAwE;;;;;;6BAIjE;aACA,KAAKrK,KAAL,CAAWrB,QAAlB;;;;EA5F2BS,MAAMa,SAArC;;AAgGAmJ,UAAU7J,SAAV,GAAsB;YACVC,UAAUG,IAAV,CAAeO,UADL;WAEXV,UAAUM,IAFC;YAGVN,UAAUM,IAHA;SAIbN,UAAUM;CAJnB;;AAOAsJ,UAAUxJ,YAAV,GAAyB;WACd2C,SADc;YAEbA,SAFa;SAGhBA;CAHT;;IC7GM+H;kCACU;;;SACP7G,OAAL,GAAe,IAAf;SACK8G,WAAL,GAAmB,IAAI3B,YAAJ,EAAnB;;;;;0BAEInF,SAAS+G,cAAc;WACtB/G,OAAL,GAAeA,OAAf;WACK8G,WAAL,CAAiBzB,IAAjB,CAAsB,EAAErF,SAAS,KAAKA,OAAhB,EAAyB+G,0BAAzB,EAAtB;;;;2BAEKA,cAAc;WACdD,WAAL,CAAiBzB,IAAjB,CAAsB,EAAErF,SAAS,KAAKA,OAAhB,EAAyB+G,0BAAzB,EAAtB;;;;wBAEEA,cAAc;WACXD,WAAL,CAAiBzB,IAAjB,CAAsB,EAAErF,SAAS,KAAKA,OAAhB,EAAyB+G,0BAAzB,EAAuCJ,KAAK,IAA5C,EAAtB;WACK3G,OAAL,GAAe,IAAf;;;;;;AAIJ,IAAagH,gBAAb;;;4BACczK,KAAZ,EAAmB;;;mIACXA,KADW;;UAGZ0K,gBAAL,GAAwB,IAAIJ,oBAAJ,EAAxB;;UAEKI,gBAAL,CAAsBH,WAAtB,CAAkCX,SAAlC,CAA4C,gBAAoC;UAAjCnG,OAAiC,QAAjCA,OAAiC;UAAxB+G,YAAwB,QAAxBA,YAAwB;UAAVJ,GAAU,QAAVA,GAAU;;YACzEpK,KAAL,CAAW2K,QAAX,CAAoB;iBACTP,MAAM,IAAN,GAAa3G,OADJ;sBAEJ2G,MAAM,IAAN,GAAaI;OAF7B;KADF;;;;;;sCAOgB;aACT;0BACa,KAAKE;OADzB;;;;0CAIoBhJ,SAlBxB,EAkBmC;aACxBA,UAAU/C,QAAV,KAAuB,KAAKqB,KAAL,CAAWrB,QAAzC;;;;6BAEO;aACA,KAAKqB,KAAL,CAAWrB,QAAlB;;;;EAtBkCS,MAAMa,SAA5C;;AA0BAwK,iBAAiBtK,iBAAjB,GAAqC;oBACjBX,UAAU2B,MAAV,CAAiBjB;CADrC;;AAIAuK,iBAAiBlL,SAAjB,GAA6B;YACjBC,UAAUG,IAAV,CAAeO,UADE;YAEjBV,UAAUM;CAFtB;;AAKA2K,iBAAiB7K,YAAjB,GAAgC;YACpB,oBAAM;CADlB;;ICtDagL,UAAb;;;;;;;;;;0CACwBlJ,SADxB,EACmC;aACxBA,UAAU/C,QAAV,KAAuB,KAAKqB,KAAL,CAAWrB,QAAzC;;;;6BAEO;;;UACC+L,gBADD,GACsB,KAAKnK,OAD3B,CACCmK,gBADD;mBAE8B,KAAK1K,KAFnC;UAECyG,QAFD,UAECA,OAFD;UAEU4C,SAFV,UAEUA,QAFV;UAEoBvC,MAFpB,UAEoBA,KAFpB;;aAIL;iBAAA;;mBACW,uBAAc;gBAAXV,CAAW,QAAXA,CAAW;gBAARE,CAAQ,QAARA,CAAQ;;6BACJ4D,KAAjB,CAAuB,OAAKlK,KAAL,CAAWyD,OAAlC,EAA2C,EAAE2C,IAAF,EAAKE,IAAL,EAA3C;qBACQ,EAAEkE,cAAc,EAAEpE,IAAF,EAAKE,IAAL,EAAhB,EAAR;WAHJ;oBAKY,yBAAc;gBAAXF,CAAW,SAAXA,CAAW;gBAARE,CAAQ,SAARA,CAAQ;;6BACLuE,MAAjB,CAAwB,EAAEzE,IAAF,EAAKE,IAAL,EAAxB;sBACS,EAAEkE,cAAc,EAAEpE,IAAF,EAAKE,IAAL,EAAhB,EAAT;WAPJ;iBASS,sBAAc;gBAAXF,CAAW,SAAXA,CAAW;gBAARE,CAAQ,SAARA,CAAQ;;6BACF8D,GAAjB,CAAqB,EAAEhE,IAAF,EAAKE,IAAL,EAArB;mBACM,EAAEkE,cAAc,EAAEpE,IAAF,EAAKE,IAAL,EAAhB,EAAN;;;aAGItG,KAAL,CAAWrB;OAfhB;;;;EAP4BS,MAAMa,SAAtC;;AA4BA2K,WAAW/K,YAAX,GAA0B;oBACNL,UAAU2B,MAAV,CAAiBjB;CADrC;;AAIA0K,WAAWrL,SAAX,GAAuB;YACXC,UAAUG,IAAV,CAAeO,UADJ;WAEZV,UAAU+F,GAAV,CAAcrF,UAFF;WAGZV,UAAUM,IAHE;YAIXN,UAAUM,IAJC;SAKdN,UAAUM;CALnB;;AAQA8K,WAAWhL,YAAX,GAA0B;WACf,mBAAM,EADS;YAEd,oBAAM,EAFQ;SAGjB,iBAAM;CAHf;;ACxCA,IAAMgI,UAAQ,SAARA,KAAQ,CAACvC,KAAD,EAAQwC,GAAR,EAAaC,GAAb;SAAqBC,KAAKD,GAAL,CAASC,KAAKF,GAAL,CAASxC,KAAT,EAAgByC,GAAhB,CAAT,EAA+BD,GAA/B,CAArB;CAAd;;AAEA,IAAaiD,UAAb;;;sBACc9K,KAAZ,EAAmBO,OAAnB,EAA4B;;;uHACpBP,KADoB,EACbO,OADa;;UAGrBZ,IAAL,GAAY,IAAZ;UACKoL,MAAL,GAAc,KAAd;;UAEKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBvB,IAAhB,OAAlB;;;;;;yCAEmB;UACSc,WADT,GAC2B,KAAKhK,OADhC,CACXmK,gBADW,CACSH,WADT;;kBAEPX,SAAZ,CAAsB,KAAKoB,UAA3B;;;;0CAEoBtJ,SAbxB,EAamC;aACxBA,UAAU/C,QAAV,KAAuB,KAAKqB,KAAL,CAAWrB,QAAzC;;;;2CAEqB;UACO4L,WADP,GACyB,KAAKhK,OAD9B,CACbmK,gBADa,CACOH,WADP;;kBAETT,WAAZ,CAAwB,KAAKkB,UAA7B;;;;qCAEyC;UAA9BvH,OAA8B,QAA9BA,OAA8B;UAArB+G,YAAqB,QAArBA,YAAqB;UAAPJ,GAAO,QAAPA,GAAO;;kCAMrCL,YAAY,IAAZ,EAAkBkB,qBAAlB,EANqC;UAEvCC,IAFuC,yBAEvCA,IAFuC;UAGvCC,GAHuC,yBAGvCA,GAHuC;UAIvCC,KAJuC,yBAIvCA,KAJuC;UAKvCC,MALuC,yBAKvCA,MALuC;;;UAOnCN,SAASP,gBACV5C,QAAM4C,aAAapE,CAAnB,EAAsB8E,IAAtB,EAA4BE,KAA5B,MAAuCZ,aAAapE,CAD1C,IAEVwB,QAAM4C,aAAalE,CAAnB,EAAsB6E,GAAtB,EAA2BE,MAA3B,MAAuCb,aAAalE,CAFzD;;UAII,CAAC,KAAKyE,MAAN,IAAgBA,MAApB,EAA4B,KAAK/K,KAAL,CAAWsL,OAAX,CAAmB,EAAE7H,gBAAF,EAAW+G,0BAAX,EAAnB;UACxB,KAAKO,MAAL,IAAeA,MAAnB,EAA2B,KAAK/K,KAAL,CAAWuL,MAAX,CAAkB,EAAE9H,gBAAF,EAAW+G,0BAAX,EAAlB;UACvB,KAAKO,MAAL,IAAe,CAACA,MAApB,EAA4B,KAAK/K,KAAL,CAAWwL,OAAX,CAAmB,EAAE/H,gBAAF,EAAW+G,0BAAX,EAAnB;UACxBO,UAAUX,GAAd,EAAmB,KAAKpK,KAAL,CAAWyL,MAAX,CAAkB,EAAEhI,gBAAF,EAAW+G,0BAAX,EAAlB;;WAEdO,MAAL,GAAcA,UAAU,CAACX,GAAzB;;;;6BAEO;UACCzL,QADD,GACc,KAAKqB,KADnB,CACCrB,QADD;;aAEAS,MAAMP,QAAN,CAAe6M,IAAf,CAAoB/M,QAApB,CAAP;;;;EAxC4BS,MAAMa,SAAtC;;AA4CA6K,WAAWjL,YAAX,GAA0B;oBACNL,UAAU2B,MAAV,CAAiBjB;CADrC;;AAIA4K,WAAWvL,SAAX,GAAuB;YACXC,UAAUG,IAAV,CAAeO,UADJ;WAEZV,UAAUM,IAFE;UAGbN,UAAUM,IAHG;WAIZN,UAAUM,IAJE;UAKbN,UAAUM;CALpB;;AAQAgL,WAAWlL,YAAX,GAA0B;WACf,mBAAM,EADS;UAEhB,kBAAM,EAFU;WAGf,mBAAM,EAHS;UAIhB,kBAAM;CAJhB;;AC5DO,IAAM+L,wBAAwB,SAAxBA,qBAAwB,CAAC1L,SAAD,EAAY2L,sBAAZ,EAAuC;MACtEC,wBAAwBD,sBAA5B;MACME,aAAa,IAAIC,GAAJ,EAAnB;;MACMC,eAHoE;;;;;;;;;;2CAInD;mBACRC,GAAX,CAAe,IAAf;;;;6CAEqB;mBACVC,MAAX,CAAkB,IAAlB;;;;+BAEO;eACA,oBAAC,SAAD,eAAe,KAAKlM,KAApB,EAA+B6L,qBAA/B,EAAP;;;;IAR0BzM,MAAMa,SAHsC;;SAcnE;eACM+L,eADN;YAEG,gBAACG,eAAD,EAAqB;8BACHA,eAAxB;YACMC,IAAN,CAAWN,WAAWO,MAAX,EAAX,EACG5E,OADH,CACW;eAAa6E,UAAU/K,WAAV,EAAb;OADX;;GAJJ;CAdK;;"}